/*L
  Copyright Washington University at St. Louis

  Distributed under the OSI-approved BSD 3-Clause License.
  See http://ncip.github.com/geneconnect/LICENSE.txt for details.
L*/

DROP TABLE CONSENSUS_DATA CASCADE CONSTRAINTS
;
DROP TABLE DATASOURCE CASCADE CONSTRAINTS
;
DROP TABLE GENE CASCADE CONSTRAINTS
;
DROP TABLE GENE_MRNA CASCADE CONSTRAINTS
;
DROP TABLE GENOMIC_IDENTIFIER CASCADE CONSTRAINTS
;
DROP TABLE GENOMIC_IDENTIFIER_SET CASCADE CONSTRAINTS
;
DROP TABLE LINKTYPE CASCADE CONSTRAINTS
;
DROP TABLE MRNA CASCADE CONSTRAINTS
;
DROP TABLE MRNA_PROTEIN CASCADE CONSTRAINTS
;
DROP TABLE ONT CASCADE CONSTRAINTS
;
DROP TABLE PROTEIN CASCADE CONSTRAINTS
;
DROP TABLE PROTEIN_GENE CASCADE CONSTRAINTS
;
DROP TABLE SET_ONT CASCADE CONSTRAINTS
;
DROP TABLE SOLUTION CASCADE CONSTRAINTS
;
DROP TABLE ROLE_LOOKUP CASCADE CONSTRAINTS
;


CREATE TABLE CONSENSUS_DATA ( 
	CONSENSUS_ID NUMBER(8) NOT NULL,
	FREQUENCY NUMBER(8,2),
	GENOMIC_ID NUMBER(8),
	SET_ID NUMBER(8),
	ID NUMBER(2),
	SOLUTION_ID NUMBER(8)
)
;

CREATE TABLE DATASOURCE ( 
	DATASOURCE_ID NUMBER(4) NOT NULL,
	DATASOURCE_NAME VARCHAR2(50) NOT NULL,
	GENOMIC_IDENTIFIER_CLASS VARCHAR2(50) NOT NULL,
	CLASS VARCHAR2(20),
	ATTRIBUTE VARCHAR2(30),
	OUTPUT_ATTRIBUTE VARCHAR2(30),
	ATTRIBUTE_TYPE VARCHAR2(40),
	ROW_FOR_GRAPH NUMBER(4),
	COL_FOR_GRAPH NUMBER(4)
)
;

CREATE TABLE GENE ( 
	GENE_ID NUMBER(20) NOT NULL,
	ENSEMBL_GENE_ID VARCHAR2(50),
	ENTREZ_GENE_ID NUMBER(8),
	UNIGENE_CLUSTER_ID VARCHAR2(50)
)
;

CREATE TABLE GENE_MRNA ( 
	GENE_ID NUMBER(20) NOT NULL,
	MRNA_ID NUMBER(20) NOT NULL
)
;

CREATE TABLE GENOMIC_IDENTIFIER ( 
	GENOMIC_ID NUMBER(8) NOT NULL,
	DATASOURCE VARCHAR2(50),
	GENOMIC_IDENTIFIER VARCHAR2(50),
	ENTZ_GENOMIC_IDENTIFIER NUMBER(8)
)
;

CREATE TABLE GENOMIC_IDENTIFIER_SET ( 
	SET_ID NUMBER(20) NOT NULL,
	GENE_ID NUMBER(20),
	MRNA_ID NUMBER(20),
	PROTEIN_ID NUMBER(20),
	SOLUTION_ID NUMBER(8)
)
;

CREATE TABLE LINKTYPE ( 
	LINK_TYPE_ID NUMBER(4) NOT NULL,
	LINK_TYPE_NAME VARCHAR2(50) NOT NULL
)
;

CREATE TABLE MRNA ( 
	MRNA_ID NUMBER(20) NOT NULL,
	ENSEMBL_TRANSCRIPT_ID VARCHAR2(50),
	GENBANK_MRNA_ACCESSION VARCHAR2(50),
	REFSEQ_MRNA_ID VARCHAR2(50)
)
;

CREATE TABLE MRNA_PROTEIN ( 
	MRNA_ID NUMBER(20) NOT NULL,
	PROTEIN_ID NUMBER(20) NOT NULL
)
;

CREATE TABLE ONT ( 
	PATH_ID NUMBER(5) NOT NULL,
	SOURCE_DS_ID NUMBER(4) NOT NULL,
	LINKTYPE_ID NUMBER(4),
	NEXT_PATH_ID NUMBER(5),
	PREV_PATH_ID NUMBER(5)
)
;

CREATE TABLE PROTEIN ( 
	PROTEIN_ID NUMBER(20) NOT NULL,
	ENSEMBL_PEPTIDE_ID VARCHAR2(50),
	REFSEQ_PROTEIN_ID VARCHAR2(50),
	UNIPROTKB_ACCESSION VARCHAR2(50),
	GENEBANK_PROTEIN_ACCESSION VARCHAR2(50)
)
;

CREATE TABLE PROTEIN_GENE ( 
	PROTEIN_ID NUMBER(20) NOT NULL,
	GENE_ID NUMBER(20) NOT NULL
)
;

CREATE TABLE SET_ONT ( 
	SET_ID NUMBER(8),
	PATH_ID NUMBER(8)
)
;

CREATE TABLE SOLUTION ( 
	SOLUTION_ID NUMBER(8) NOT NULL
)
;

CREATE TABLE ROLE_LOOKUP (
	ID NUMBER (2),
	SOURCE_CLASS VARCHAR2 (50),
	TARGET_CLASS VARCHAR2 (50),
	ROLE_NAME VARCHAR2 (50)
)
;

ALTER TABLE CONSENSUS_DATA ADD CONSTRAINT PK_CONSENSUS_DATA 
	PRIMARY KEY (CONSENSUS_ID)
;

ALTER TABLE DATASOURCE ADD CONSTRAINT PK_DATASOURCE 
	PRIMARY KEY (DATASOURCE_ID)
;

ALTER TABLE GENE ADD CONSTRAINT PK_GENE 
	PRIMARY KEY (GENE_ID)
;

ALTER TABLE GENOMIC_IDENTIFIER ADD CONSTRAINT PK_GENOMIC_IDENTIFIER 
	PRIMARY KEY (GENOMIC_ID)
;

ALTER TABLE GENOMIC_IDENTIFIER_SET ADD CONSTRAINT PK_GENOMIC_IDENTIFIER_SET 
	PRIMARY KEY (SET_ID)
;

ALTER TABLE LINKTYPE ADD CONSTRAINT PK_LINKTYPE 
	PRIMARY KEY (LINK_TYPE_ID)
;

ALTER TABLE MRNA ADD CONSTRAINT PK_MRNA 
	PRIMARY KEY (MRNA_ID)
;

ALTER TABLE ONT ADD CONSTRAINT PK_ONT 
	PRIMARY KEY (PATH_ID)
;

ALTER TABLE PROTEIN ADD CONSTRAINT PK_PROTEIN 
	PRIMARY KEY (PROTEIN_ID)
;

ALTER TABLE SOLUTION ADD CONSTRAINT PK_SOLUTION 
	PRIMARY KEY (SOLUTION_ID)
;




ALTER TABLE CONSENSUS_DATA ADD CONSTRAINT FK_CONSENSUS_DAT_GENOMIC_IDENT 
	FOREIGN KEY (GENOMIC_ID) REFERENCES GENOMIC_IDENTIFIER (GENOMIC_ID)
;

ALTER TABLE CONSENSUS_DATA ADD CONSTRAINT FK_CONSENSUS_DATA_SOLUTION 
	FOREIGN KEY (SOLUTION_ID) REFERENCES SOLUTION (SOLUTION_ID)
;

ALTER TABLE CONSENSUS_DATA ADD CONSTRAINT FK_CONSENSUS_DAT_GENOMIC_SET 
	FOREIGN KEY (SET_ID) REFERENCES GENOMIC_IDENTIFIER_SET (SET_ID)
;

ALTER TABLE GENE_MRNA ADD CONSTRAINT FK_GENE_MRNA_GENE 
	FOREIGN KEY (GENE_ID) REFERENCES GENE (GENE_ID)
;

ALTER TABLE GENE_MRNA ADD CONSTRAINT FK_GENE_MRNA_MRNA 
	FOREIGN KEY (MRNA_ID) REFERENCES MRNA (MRNA_ID)
;

ALTER TABLE GENOMIC_IDENTIFIER_SET ADD CONSTRAINT FK_GENOMIC_IDENTIFIER__PROTEIN 
	FOREIGN KEY (PROTEIN_ID) REFERENCES PROTEIN (PROTEIN_ID)
;

ALTER TABLE GENOMIC_IDENTIFIER_SET ADD CONSTRAINT FK_GENOMIC_IDENTIFIER_SET_GENE 
	FOREIGN KEY (GENE_ID) REFERENCES GENE (GENE_ID)
;

ALTER TABLE GENOMIC_IDENTIFIER_SET ADD CONSTRAINT FK_GENOMIC_IDENTIFIER_SET_MRNA 
	FOREIGN KEY (MRNA_ID) REFERENCES MRNA (MRNA_ID)
;

ALTER TABLE GENOMIC_IDENTIFIER_SET ADD CONSTRAINT FK_GENOMIC_IDENTIFIER_SOLUTION 
	FOREIGN KEY (SOLUTION_ID) REFERENCES SOLUTION (SOLUTION_ID)
;

ALTER TABLE MRNA_PROTEIN ADD CONSTRAINT FK_MRNA_PROTEIN_MRNA 
	FOREIGN KEY (MRNA_ID) REFERENCES MRNA (MRNA_ID)
;

ALTER TABLE MRNA_PROTEIN ADD CONSTRAINT FK_MRNA_PROTEIN_PROTEIN 
	FOREIGN KEY (PROTEIN_ID) REFERENCES PROTEIN (PROTEIN_ID)
;

ALTER TABLE ONT ADD CONSTRAINT FK_ONT_DATASOURCE 
	FOREIGN KEY (SOURCE_DS_ID) REFERENCES DATASOURCE (DATASOURCE_ID)
;

ALTER TABLE ONT ADD CONSTRAINT FK_ONT_LINKTYPE 
	FOREIGN KEY (LINKTYPE_ID) REFERENCES LINKTYPE (LINK_TYPE_ID)
;

ALTER TABLE PROTEIN_GENE ADD CONSTRAINT FK_PROTEIN_GENE_GENE 
	FOREIGN KEY (GENE_ID) REFERENCES GENE (GENE_ID)
;

ALTER TABLE PROTEIN_GENE ADD CONSTRAINT FK_PROTEIN_GENE_PROTEIN 
	FOREIGN KEY (PROTEIN_ID) REFERENCES PROTEIN (PROTEIN_ID)
;

ALTER TABLE SET_ONT ADD CONSTRAINT FK_SET_ONT_ONT 
	FOREIGN KEY (PATH_ID) REFERENCES ONT (PATH_ID)
;

ALTER TABLE SET_ONT ADD CONSTRAINT FK_SET_ONT_SET 
	FOREIGN KEY (SET_ID) REFERENCES GENOMIC_IDENTIFIER_SET (SET_ID)
;

INSERT INTO SOLUTION VALUES(1);
INSERT INTO GENE VALUES(1,'ENS1',1001,'UNIG1');
INSERT INTO GENE VALUES(2,'ENS2',1002,'UNIG1');
INSERT INTO GENE VALUES(3,'ENS2',NULL,'UNIG2');
INSERT INTO MRNA VALUES(1,'ENST1','GBM1','REFM1');
INSERT INTO MRNA VALUES(2,'ENST1','GBM2','REFM2');
INSERT INTO MRNA VALUES(3,'ENST2',NULL,'REFM3');
INSERT INTO PROTEIN VALUES(1,'ENSP1','REFP1','UNIP1','GBP1');
INSERT INTO PROTEIN VALUES(2,'ENSP1','REFP2','UNIP1','GBP1');
INSERT INTO PROTEIN VALUES(3,'ENSP1',NULL,'UNIP2','GBP3');
INSERT INTO PROTEIN VALUES(4,'ENSP2','REFP2',NULL,NULL);

INSERT INTO GENE_MRNA VALUES(1,1);
INSERT INTO GENE_MRNA VALUES(1,2);
INSERT INTO GENE_MRNA VALUES(2,2);
INSERT INTO GENE_MRNA VALUES(3,2);
INSERT INTO GENE_MRNA VALUES(3,3);

INSERT INTO MRNA_PROTEIN VALUES(1,1);
INSERT INTO MRNA_PROTEIN VALUES(2,1);
INSERT INTO MRNA_PROTEIN VALUES(2,2);
INSERT INTO MRNA_PROTEIN VALUES(2,4);
INSERT INTO MRNA_PROTEIN VALUES(3,3):

INSERT INTO PROTEIN_GENE VALUES(1,1);
INSERT INTO PROTEIN_GENE VALUES(1,1);
INSERT INTO PROTEIN_GENE VALUES(2,2);
INSERT INTO PROTEIN_GENE VALUES(4,3);
INSERT INTO PROTEIN_GENE VALUES(3,3);

INSERT INTO GENOMIC_IDENTIFIER_SET VALUES(1,1,1,1,null);
INSERT INTO GENOMIC_IDENTIFIER_SET VALUES(2,1,2,1,null);
INSERT INTO GENOMIC_IDENTIFIER_SET VALUES(3,2,2,2,null);
INSERT INTO GENOMIC_IDENTIFIER_SET VALUES(4,3,2,4,null);
INSERT INTO GENOMIC_IDENTIFIER_SET VALUES(5,3,3,3,null);

INSERT INTO LINKTYPE VALUES(1,'DIRECT');
INSERT INTO LINKTYPE VALUES(2,'INFERRED');
INSERT INTO LINKTYPE VALUES(3,'BLAST');

INSERT INTO DATASOURCE VALUES(1,'Ensembl Gene','EnsemblGene','Gene','ensemblGeneId','ensemblGeneAsOutput','java.lang.String',1,1);
INSERT INTO DATASOURCE VALUES(2,'Entrez Gene','EntrezGene','Gene','entrezGeneId','entrezGeneAsOutput','java.lang.Long',1,3);
INSERT INTO DATASOURCE VALUES(3,'UniGene','UniGene','Gene','unigeneClusterId','unigeneAsOutput','java.lang.String',2,2);
INSERT INTO DATASOURCE VALUES(4,'Ensembl Transcript','EnsemblTranscript','MessengerRNA','ensemblTranscriptId','ensemblTranscriptAsOutput','java.lang.String',4,1);
INSERT INTO DATASOURCE VALUES(5,'GenBank mRNA','GenBankmRNA','MessengerRNA','genbankAccession','genbankmRNAAsOutput','java.lang.String',3,2);
INSERT INTO DATASOURCE VALUES(6,'RefSeq mRNA','RefSeqmRNA','MessengerRNA','refseqId','refseqmRNAAsOutput','java.lang.String',4,3);
INSERT INTO DATASOURCE VALUES(7,'Ensembl Peptide','EnsemblPeptide','Protein','ensemblPeptideId','ensemblPeptideAsOutput','java.lang.String',5,1);
INSERT INTO DATASOURCE VALUES(8,'RefSeq Protein','RefSeqProtein','Protein','refseqId','refseqProteinAsOutput','java.lang.String',5,3);
INSERT INTO DATASOURCE VALUES(9,'UniProtKB','UniProtKB','Protein','uniprotkbPrimaryAccession','uniprotkbAsOutput','java.lang.String',7,2);
INSERT INTO DATASOURCE VALUES(10,'GenBank Protein','GenBankProtein','Protein','genbankAccession','genbankProteinAsOutput','java.lang.String',6,2);

INSERT INTO ROLE_LOOKUP VALUES(1,'GenomicIdentifierSet','Gene','gene');
INSERT INTO ROLE_LOOKUP VALUES(2,'GenomicIdentifierSet','Protein','protein');
INSERT INTO ROLE_LOOKUP VALUES(3,'GenomicIdentifierSet','MessengerRNA','messengerRNA');
INSERT INTO ROLE_LOOKUP VALUES(4,'GenomicIdentifierSet','OrderOfNodeTraversal','orderOfNodeTraversalCollection');
INSERT INTO ROLE_LOOKUP VALUES(5,'Gene','GenomicIdentifierSet','genomicIdentifierSetCollection');
INSERT INTO ROLE_LOOKUP VALUES(6,'Gene','MessengerRNA','messengerRNACollection');
INSERT INTO ROLE_LOOKUP VALUES(7,'Gene','Protein','proteinCollection');
INSERT INTO ROLE_LOOKUP VALUES(8,'Protein','GenomicIdentifierSet','genomicIdentifierSetCollection');
INSERT INTO ROLE_LOOKUP VALUES(9,'Protein','MessengerRNA','messengerRNACollection');
INSERT INTO ROLE_LOOKUP VALUES(10,'Protein','Gene','geneCollection');
INSERT INTO ROLE_LOOKUP VALUES(11,'MessengerRNA','GenomicIdentifierSet','genomicIdentifierSetCollection');
INSERT INTO ROLE_LOOKUP VALUES(12,'MessengerRNA','Protein','proteinCollection');
INSERT INTO ROLE_LOOKUP VALUES(13,'MessengerRNA','Gene','geneCollection');
INSERT INTO ROLE_LOOKUP VALUES(14,'OrderOfNodeTraversal','GenomicIdentifierSet','genomicIdentifierSetCollection');
INSERT INTO ROLE_LOOKUP VALUES(15,'GenomicIdentifierSet','ConsensusIdentifierData','consensusIdentifierDataCollection');
INSERT INTO ROLE_LOOKUP VALUES(16,'OrderOfNodeTraversal','DataSource','sourceDataSource');
INSERT INTO ROLE_LOOKUP VALUES(17,'OrderOfNodeTraversal','LinkType','linkType');


INSERT INTO ONT VALUES(1,1,1,2,null);
INSERT INTO ONT VALUES(2,2,1,3,1);
INSERT INTO ONT VALUES(3,3,null,null,2);
INSERT INTO ONT VALUES(4,2,2,5,null);
INSERT INTO ONT VALUES(5,3,1,6,4);
INSERT INTO ONT VALUES(6,5,null,null,5);
INSERT INTO ONT VALUES(7,3,2,8,null);
INSERT INTO ONT VALUES(8,5,2,9,7);
INSERT INTO ONT VALUES(9,2,null,null,8);
INSERT INTO ONT VALUES(10,1,1,11,null);
INSERT INTO ONT VALUES(11,2,1,12,10);
INSERT INTO ONT VALUES(12,3,null,null,11);
INSERT INTO ONT VALUES(13,1,1,14,null);
INSERT INTO ONT VALUES(14,3,2,15,13);
INSERT INTO ONT VALUES(15,5,null,null,14);
INSERT INTO ONT VALUES(16,1,3,17,null);
INSERT INTO ONT VALUES(17,4,3,18,16);
INSERT INTO ONT VALUES(18,5,null,null,17);
INSERT INTO ONT VALUES(19,1,1,20,null);
INSERT INTO ONT VALUES(20,2,null,null,19);
INSERT INTO ONT VALUES(21,1,1,22,null);
INSERT INTO ONT VALUES(22,3,2,23,21);
INSERT INTO ONT VALUES(23,5,null,null,22);
INSERT INTO ONT VALUES(24,1,2,25,null);
INSERT INTO ONT VALUES(25,2,null,null,24);
INSERT INTO ONT VALUES(26,1,1,27,null);
INSERT INTO ONT VALUES(27,3,1,28,26);
INSERT INTO ONT VALUES(28,5,null,null,27);
INSERT INTO ONT VALUES(29,1,2,30,24);
INSERT INTO ONT VALUES(30,2,2,null,29);

INSERT INTO SET_ONT VALUES(1,1);
INSERT INTO SET_ONT VALUES(1,4);
INSERT INTO SET_ONT VALUES(2,7);
INSERT INTO SET_ONT VALUES(2,10);
INSERT INTO SET_ONT VALUES(2,26);
INSERT INTO SET_ONT VALUES(3,13);
INSERT INTO SET_ONT VALUES(4,16);
INSERT INTO SET_ONT VALUES(4,19);
INSERT INTO SET_ONT VALUES(4,21);
INSERT INTO SET_ONT VALUES(5,24);
INSERT INTO SET_ONT VALUES(5,29);

INSERT INTO GENOMIC_IDENTIFIER VALUES(1,'Ensembl Gene',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(2,'Entrez Gene',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(3,'UniGene',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(4,'Ensembl Transcript',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(5,'GenBank mRNA',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(6,'RefSeq mRNA',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(7,'Ensembl Peptide',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(8,'RefSeq Protein',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(9,'UniProtKB',1,1);
INSERT INTO GENOMIC_IDENTIFIER VALUES(10,'GenBank Protein',1,1);

INSERT INTO CONSENSUS_DATA VALUES(1,1,1,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(2,1,2,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(3,1,3,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(4,1,4,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(5,1,5,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(6,1,6,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(7,1,7,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(8,1,8,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(9,1,9,1,1,1);
INSERT INTO CONSENSUS_DATA VALUES(10,1,10,1,1,1);

ALTER TABLE ONT ADD CONSTRAINT FK_ONT_ONT 
	FOREIGN KEY (NEXT_PATH_ID) REFERENCES ONT (PATH_ID)
;

ALTER TABLE ONT ADD CONSTRAINT FK_ONT_PREV_ONT 
	FOREIGN KEY (PREV_PATH_ID) REFERENCES ONT (PATH_ID)
;