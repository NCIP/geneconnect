<?xml version="1.0" encoding="ISO-8859-1"?>

<!--L
  Copyright Washington University at St. Louis

  Distributed under the OSI-approved BSD 3-Clause License.
  See http://ncip.github.com/geneconnect/LICENSE.txt for details.
L-->

<SQLSCRIPT>
	<INSERTQUERY>CREATE INDEX IDX_EUG_UGID ON ENTREZ_UNIGENE(EUG_UGID)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_EUG_GENEID ON ENTREZ_UNIGENE(EUG_GENEID)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_UEX_UGID ON UG_EXPRESS(UEX_UGID)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_UEX_TISSUEID ON UG_EXPRESS(UEX_TISSUEID)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_CDE_GENEID ON CHIPDESCRIPTION(CDE_GENEID)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_CDE_PROBESET ON CHIPDESCRIPTION(CDE_PROBESET)</INSERTQUERY>
        <INSERTQUERY>CREATE TABLE TISSUE_EXPRESSION_U ( GTE_GENEID INT(12) NOT NULL ,GTE_STD_TERMID VARCHAR(30) NOT NULL)</INSERTQUERY>
        <INSERTQUERY>insert into TISSUE_EXPRESSION_U ( Select DISTINCT ENTREZGENE.EGE_GENEID,SYSTEM_TERMDATA.STD_TERMID  from  ENTREZGENE, SYSTEM_TERMDATA,UG_EXPRESS, ENTREZ_UNIGENE where ENTREZGENE.EGE_GENEID = ENTREZ_UNIGENE.EUG_GENEID  
 and SYSTEM_TERMDATA.STD_TERMID = UG_EXPRESS.UEX_TISSUEID and UG_EXPRESS.UEX_UGID = ENTREZ_UNIGENE.EUG_UGID)</INSERTQUERY>
        <INSERTQUERY> CREATE TABLE FE_UNIGENE_U ( FEU_ID INT(12) NOT NULL AUTO_INCREMENT,  FEU_UGID VARCHAR(23) NOT NULL,
 CONSTRAINT PK_FE_UNIGENE PRIMARY KEY (FEU_ID) )</INSERTQUERY>
        <INSERTQUERY> Insert into FE_UNIGENE_U  (FEU_UGID)  Select  DISTINCT ENTREZ_UNIGENE.EUG_UGID from ENTREZ_UNIGENE,ENTREZGENE WHERE ENTREZGENE.EGE_GENEID = ENTREZ_UNIGENE.EUG_GENEID </INSERTQUERY>
        <INSERTQUERY>CREATE TABLE FE_UNIGENE_ENTREZGENE_U (FE_ID INT(12) NOT NULL , FE_GENEID INT(12) NOT NULL)  </INSERTQUERY>
        <INSERTQUERY>   insert into FE_UNIGENE_ENTREZGENE_U Select FE_UNIGENE_U.FEU_ID,ENTREZGENE.EGE_GENEID from ENTREZGENE,FE_UNIGENE_U, ENTREZ_UNIGENE 
 where ENTREZGENE.EGE_GENEID = ENTREZ_UNIGENE.EUG_GENEID and ENTREZ_UNIGENE.EUG_UGID = FE_UNIGENE_U.FEU_UGID
 </INSERTQUERY>
        <INSERTQUERY>CREATE TABLE PROBESET_U (PRB_ID INT(12) NOT NULL AUTO_INCREMENT , 
PROBESET VARCHAR(35) NOT NULL ,  PRB_DESCRIPTION  TEXT, CONSTRAINT PK_PROBESET PRIMARY KEY(PRB_ID))  </INSERTQUERY>
        <INSERTQUERY> insert into PROBESET_U  (PROBESET, PRB_DESCRIPTION )Select DISTINCT 
CHIPDESCRIPTION.CDE_PROBESET,CHIPDESCRIPTION.CDE_CHIP_DESCRIPTION from CHIPDESCRIPTION
</INSERTQUERY>
        <INSERTQUERY>CREATE TABLE GENE_PROBESET_U (GPB_GENEID INT(12) NOT NULL , GPB_PRB_ID INT(12) NOT NULL) </INSERTQUERY>
        <INSERTQUERY>Insert into GENE_PROBESET_U Select distinct ENTREZGENE.EGE_GENEID,PROBESET_U.PRB_ID from ENTREZGENE,PROBESET_U,CHIPDESCRIPTION 
where ENTREZGENE.EGE_GENEID = CHIPDESCRIPTION.CDE_GENEID and CHIPDESCRIPTION.CDE_PROBESET = PROBESET_U.PROBESET </INSERTQUERY>
 	<INSERTQUERY>ALTER TABLE  ENTREZ_UNIGENE DROP INDEX IDX_EUG_UGID</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE ENTREZ_UNIGENE DROP INDEX IDX_EUG_GENEID</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE UG_EXPRESS DROP INDEX IDX_UEX_UGID</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE UG_EXPRESS DROP INDEX IDX_UEX_TISSUEID</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE CHIPDESCRIPTION DROP INDEX IDX_CDE_GENEID</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE CHIPDESCRIPTION DROP INDEX IDX_CDE_PROBESET</INSERTQUERY>	
     <INSERTQUERY> CREATE TABLE ACCESSION_U (GAC_ACC_ID INT(12) NOT NULL AUTO_INCREMENT, GAC_ACC_NO VARCHAR(30) NOT NULL, 
GAC_PRB_ID INT(12) NOT NULL, GAC_FEU_ID INT(12) NOT NULL, CONSTRAINT PK_ACCESSION PRIMARY KEY(GAC_ACC_ID))
</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_FE_GENEID ON FE_UNIGENE_ENTREZGENE_U(FE_GENEID)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_USE_UGID ON UG_SEQUENCE(USE_UGID)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_FEU_UGID ON FE_UNIGENE_U(FEU_UGID)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_GPB_GENEID ON GENE_PROBESET_U(GPB_GENEID)</INSERTQUERY>
        <INSERTQUERY>insert into ACCESSION_U (GAC_ACC_NO,  GAC_PRB_ID,  GAC_FEU_ID) Select UG_SEQUENCE.USE_ACC_NO,GENE_PROBESET_U.GPB_PRB_ID,FE_UNIGENE_U.FEU_ID 
from UG_SEQUENCE,FE_UNIGENE_ENTREZGENE_U,FE_UNIGENE_U,GENE_PROBESET_U 
where UG_SEQUENCE.USE_UGID = FE_UNIGENE_U.FEU_UGID 
and FE_UNIGENE_U.FEU_ID = FE_UNIGENE_ENTREZGENE_U.FE_ID
and FE_UNIGENE_ENTREZGENE_U.FE_GENEID = GENE_PROBESET_U.GPB_GENEID </INSERTQUERY>
	<INSERTQUERY>ALTER TABLE  FE_UNIGENE_ENTREZGENE_U DROP INDEX IDX_FE_GENEID</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE UG_SEQUENCE DROP INDEX IDX_USE_UGID</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE FE_UNIGENE_U DROP INDEX IDX_FEU_UGID</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE GENE_PROBESET_U DROP INDEX IDX_GPB_GENEID</INSERTQUERY>
    <INSERTQUERY> CREATE TABLE MICROARRAY_U (MARRAY_ID INT(4) NOT NULL,MARRAY_NAME VARCHAR(50) NOT NULL,MARRAY_LOCAL_TAXID INT(12) NOT NULL)</INSERTQUERY>
    <INSERTQUERY>insert into MICROARRAY_U Select distinct CTY_CHIPTYPEID,CTY_CHIPNAME,OTM_LOCAL_TAXID from CHIPTYPES,ORGANISM_TAXONOMYMAP where UPPER(CTY_SPECIES)=UPPER(OTM_ORGNAME)</INSERTQUERY>
    <INSERTQUERY> CREATE TABLE PROBESET_MICROARRAY_U (	PMR_MARRAY_ID INT(4) NOT NULL, PMR_PRB_ID INT(12) NOT NULL) </INSERTQUERY>
    <INSERTQUERY>insert into PROBESET_MICROARRAY_U Select MICROARRAY_U.MARRAY_ID,PROBESET_U.PRB_ID from MICROARRAY_U,PROBESET_U,CHIPDESCRIPTION 
where MICROARRAY_U.MARRAY_ID = CHIPDESCRIPTION.CDE_CHIPTYPEID and PROBESET_U.PROBESET = CHIPDESCRIPTION.CDE_PROBESET </INSERTQUERY>
        <INSERTQUERY>CREATE TABLE SNPDATA_U ( SNP_GENEID INT(12) NOT NULL ,SNP_SNPID INT (12) NOT NULL)  </INSERTQUERY>
        <INSERTQUERY>insert into SNPDATA_U Select ENTREZ_SNP.ESN_GENEID,ENTREZ_SNP.ESN_SNPID from ENTREZ_SNP,ENTREZGENE where ENTREZ_SNP.ESN_GENEID = ENTREZGENE.EGE_GENEID </INSERTQUERY>
        <INSERTQUERY>CREATE TABLE STSDATA_U (STSID INT(10) NOT NULL)  </INSERTQUERY>
        <INSERTQUERY>Insert into STSDATA_U Select distinct EST_STSID from ENTREZ_STS
 </INSERTQUERY>
        <INSERTQUERY>CREATE TABLE GENE_STSDATA_U (GST_GENEID INT(12) NOT NULL, GST_STSID INT (10) NOT NULL)  </INSERTQUERY>
        <INSERTQUERY>insert into GENE_STSDATA_U Select ENTREZ_STS.EST_GENEID,ENTREZ_STS.EST_STSID from ENTREZ_STS, 
STSDATA_U,ENTREZGENE  where ENTREZ_STS.EST_GENEID = ENTREZGENE.EGE_GENEID and ENTREZ_STS.EST_STSID = STSDATA_U.STSID </INSERTQUERY>
        <INSERTQUERY>CREATE TABLE PHENOTYPE_U (PHE_ID INT(12) NOT NULL AUTO_INCREMENT, PHENOTYPE VARCHAR(255) NOT NULL,
CONSTRAINT PK_PHENOTYPE PRIMARY KEY(PHE_ID) ) </INSERTQUERY>
        <INSERTQUERY> Insert into PHENOTYPE_U (PHENOTYPE) Select distinct ENTREZ_PHENOTYPE.EPH_PHENOTYPE from ENTREZ_PHENOTYPE</INSERTQUERY>
        <INSERTQUERY>CREATE TABLE GENE_PHENOTYPE_U (GPH_GENEID INT(12) NOT NULL ,GPH_PHE_ID INT(12) NOT NULL ) </INSERTQUERY>
        <INSERTQUERY>insert into GENE_PHENOTYPE_U Select ENTREZGENE.EGE_GENEID,PHENOTYPE_U.PHE_ID from ENTREZGENE, PHENOTYPE_U, ENTREZ_PHENOTYPE 
where ENTREZGENE.EGE_GENEID = ENTREZ_PHENOTYPE.EPH_GENEID and ENTREZ_PHENOTYPE.EPH_PHENOTYPE = PHENOTYPE_U.PHENOTYPE </INSERTQUERY>
        <INSERTQUERY>CREATE TABLE GENE_GOTERM_U (GOT_GENEID INT(12) NOT NULL ,GOT_STD_TERMID VARCHAR(30) NOT NULL )  </INSERTQUERY>
        <INSERTQUERY>insert into GENE_GOTERM_U Select ENTREZGENE.EGE_GENEID,SYSTEM_TERMDATA.STD_TERMID from ENTREZGENE,SYSTEM_TERMDATA,ENTREZ_GOID where 
ENTREZGENE.EGE_GENEID = ENTREZ_GOID.EGO_GENEID and SYSTEM_TERMDATA.STD_TERMID = ENTREZ_GOID.EGO_GOID </INSERTQUERY>
        <INSERTQUERY>CREATE TABLE CHROMOSOME_U (CHR_ID INT(12) NOT NULL AUTO_INCREMENT, CHROMOSOME VARCHAR(30) NOT NULL,
CONSTRAINT PK_CHROMOSOME PRIMARY KEY(CHR_ID)) </INSERTQUERY>
        <INSERTQUERY>INSERT INTO CHROMOSOME_U (CHROMOSOME) Select distinct EGE_CHROMOSOME from ENTREZGENE WHERE EGE_CHROMOSOME IS NOT NULL </INSERTQUERY>
        <INSERTQUERY>CREATE INDEX IDX_GPW_FROMGENEID ON GENE_PMID_WEIGHTS(GPW_FROMGENEID)</INSERTQUERY>
        <INSERTQUERY>CREATE TABLE LITERATURE_U ( LIT_ID INT(12) NOT NULL AUTO_INCREMENT, LIT_FROM_GENEID INT(12) NOT NULL, 
LIT_TO_GENEID INT(12) NOT NULL, LIT_CORRELATION VARCHAR(165) NOT NULL,
CONSTRAINT PK_LITERATURE PRIMARY KEY(LIT_ID)) </INSERTQUERY>
        <INSERTQUERY>INSERT INTO LITERATURE_U 
(LIT_FROM_GENEID, LIT_TO_GENEID, LIT_CORRELATION)
SELECT GENE_PMID_WEIGHTS.GPW_FROMGENEID, GENE_PMID_WEIGHTS.GPW_TOGENEID,
 CAST((POWER(GENE_PMID_WEIGHTS.GPW_WEIGHT, 2)/(GENE_PMID_WEIGHTS.GPW_FROMPUBCT*GPW_TOPUBCT)) AS CHAR)
FROM GENE_PMID_WEIGHTS, ENTREZGENE where GENE_PMID_WEIGHTS.GPW_FROMGENEID = ENTREZGENE.EGE_GENEID </INSERTQUERY>
        <INSERTQUERY>ALTER TABLE GENE_PMID_WEIGHTS DROP INDEX IDX_GPW_FROMGENEID</INSERTQUERY>
        <INSERTQUERY>CREATE TABLE GENE_LITERATURE_U (	GLT_EGE_GENEID INT (12) NOT NULL,GLT_LIT_ID INT(12) NOT NULL)  </INSERTQUERY>
        <INSERTQUERY>insert into GENE_LITERATURE_U Select ENTREZGENE.EGE_GENEID,LITERATURE_U.LIT_ID from ENTREZGENE,LITERATURE_U where ENTREZGENE.EGE_GENEID = LITERATURE_U.LIT_FROM_GENEID </INSERTQUERY>
	<INSERTQUERY>CREATE TABLE PROBESET_PROBESET_U (GPB_PRB_ID1	INTEGER(12),GPB_PRB_ID2	INTEGER(12))</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_HGE_GENEID1 ON HOMOLOGENE(HGE_GENEID1)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_HGE_GENEID2 ON HOMOLOGENE(HGE_GENEID2)</INSERTQUERY>
	<INSERTQUERY>CREATE INDEX IDX_GPB_GENEID ON GENE_PROBESET_U(GPB_GENEID)</INSERTQUERY>
		<INSERTQUERY>INSERT INTO PROBESET_PROBESET_U (	SELECT DISTINCT A.GPB_PRB_ID,B.GPB_PRB_ID	FROM HOMOLOGENE, GENE_PROBESET_U A, GENE_PROBESET_U B 
WHERE HOMOLOGENE.HGE_GENEID1=A.GPB_GENEID 	AND HOMOLOGENE.HGE_GENEID2=B.GPB_GENEID )</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE HOMOLOGENE DROP INDEX IDX_HGE_GENEID1</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE HOMOLOGENE DROP INDEX IDX_HGE_GENEID2</INSERTQUERY>
	<INSERTQUERY>ALTER TABLE GENE_PROBESET_U DROP INDEX IDX_GPB_GENEID</INSERTQUERY>
		<INSERTQUERY>CREATE TABLE GENEVERSION_U  (	GENEID INTEGER(12) NOT NULL AUTO_INCREMENT,ENTREZ_VERSION VARCHAR(30), 
UNIGENE_VERSION VARCHAR(30),UNI_STS_VERSION VARCHAR(30),	GO_VERSION VARCHAR(30), HML_VERSION VARCHAR(30),PUBMED_VERSION VARCHAR(30),
DBSNP_VERSION VARCHAR(30),TAX_VERSION VARCHAR(30),EGE_GENE_ID INTEGER(12) NOT NULL,CONSTRAINT PK_GENE_VERSION PRIMARY KEY(GENEID))</INSERTQUERY>
		<INSERTQUERY>INSERT INTO GENEVERSION_U (ENTREZ_VERSION, UNIGENE_VERSION, UNI_STS_VERSION,  GO_VERSION, HML_VERSION,  PUBMED_VERSION, 
DBSNP_VERSION, TAX_VERSION, EGE_GENE_ID ) 
SELECT  RVH_ENTREZ_VERSION, RVH_UNIGENE_VERSION, RVH_UNI_STS_VERSION, RVH_GO_VERSION, 
RVH_HML_VERSION, '1.0', RVH_DBSNP_VERSION, RVH_TAX_VERSION,ENTREZGENE.EGE_GENEID FROM ENTREZGENE,REVISION_HISTORY WHERE 
REVISION_HISTORY.RVH_LOCAL_TAXID=ENTREZGENE.EGE_LOCAL_TAXID</INSERTQUERY>
		<INSERTQUERY>CREATE TABLE FE_HOMOLOGENE_U  (HML_ID INTEGER(12) NOT NULL AUTO_INCREMENT,HGE_GENEID1 INTEGER(12),HGE_GENEID2 INTEGER(12),
HGE_ALIGNMENT	FLOAT(6,2),HGE_RECIPROCAL	CHAR(1),CONSTRAINT PK_FE_HOMOLOGENE PRIMARY KEY(HML_ID))</INSERTQUERY>
		<INSERTQUERY>INSERT INTO FE_HOMOLOGENE_U (HGE_GENEID1,HGE_GENEID2,HGE_ALIGNMENT,HGE_RECIPROCAL) 
SELECT HGE_GENEID1,HGE_GENEID2,HGE_ALIGNMENT,HGE_RECIPROCAL FROM HOMOLOGENE,ENTREZGENE A,ENTREZGENE B WHERE A.EGE_GENEID=HGE_GENEID1 AND B.EGE_GENEID=HGE_GENEID2</INSERTQUERY>
        <INSERTQUERY> CREATE TABLE FE_OMIM_U ( OMIM_ID INT(8) NOT NULL)</INSERTQUERY>
        <INSERTQUERY>insert into FE_OMIM_U Select distinct ENTREZ_OMIM.EOM_OMIM from ENTREZ_OMIM </INSERTQUERY>
        <INSERTQUERY> CREATE TABLE GENE_OMIM_U (GOM_OMIM_ID INT(8) NOT NULL,GOM_GENEID INT(12) NOT NULL) </INSERTQUERY>
        <INSERTQUERY>Insert into GENE_OMIM_U Select FE_OMIM_U.OMIM_ID,ENTREZGENE.EGE_GENEID from FE_OMIM_U,ENTREZ_OMIM,ENTREZGENE 
where FE_OMIM_U.OMIM_ID = ENTREZ_OMIM.EOM_OMIM and ENTREZ_OMIM.EOM_GENEID = ENTREZGENE.EGE_GENEID </INSERTQUERY>
        <INSERTQUERY> create table FE_ENTREZGENE_U as (select * from ENTREZGENE)</INSERTQUERY>
        <INSERTQUERY> ALTER TABLE FE_ENTREZGENE_U ADD( EGE_CHR_ID INT(12),  EGE_PUBMED_CT INT(12))</INSERTQUERY>
        <INSERTQUERY>UPDATE FE_ENTREZGENE_U e SET e.EGE_CHR_ID = (select c.CHR_ID from CHROMOSOME_U c WHERE e.EGE_CHROMOSOME = c.CHROMOSOME) </INSERTQUERY>
        <INSERTQUERY>UPDATE FE_ENTREZGENE_U e SET e.EGE_PUBMED_CT = (select distinct GPW_FROMPUBCT from GENE_PMID_WEIGHTS P WHERE e.EGE_GENEID = P.GPW_FROMGENEID) </INSERTQUERY>
     	<INSERTQUERY>create table FE_SYSTEM_TERMDATA_U as (select * from SYSTEM_TERMDATA)</INSERTQUERY>
		<INSERTQUERY>CREATE TABLE ENTREZGENE_HOMOLOGENE_U(HGE_GENEID  INTEGER(12) NOT NULL, HML_ID  INTEGER(12) NOT NULL) AS (SELECT DISTINCT HGE_GENEID1,HML_ID FROM FE_HOMOLOGENE_U)</INSERTQUERY>
</SQLSCRIPT>
